.. _observatory-telemetry:

########
Overview
########

Telemetry, events, and commands from the observatory are recorded in the Engineering and Facilities Database (EFD), enabling real-time monitoring of subsystems using Chronograf dashboards and alerts.

Data analysis of the EFD is conducted in the RSP notebook aspect, utilizing the EFD client.

In the Summit environment, the EFD data is retained for a nominal period of 30 days.
The data is then replicated to the USDF environment, allowing project staff to perform analysis without disrupting Summit operations, including trend analysis on historical data.

In Sasquatch, the EFD topics fall under the ``lsst.sal`` namespace, with their schemas defined by `SAL`_.


Relative throughput of EFD topics
---------------------------------

We use a Sankey diagram to depict the data flowing from the CSCs (source) to the Kafka topics (target) by looking at the size of each topic in Kafka (value) for `telemetry`_ and `events`_.
The value is represented by the thickness of the line connecting a CSC to a Kafka topic. Whe show topics larger than 10KB only.

This diagnostic helped us to identify an excessive amount of data flowing to the ``MTM1M3.logevent_forceActuatorWarning-0`` topic.


.. _SAL: https://ts-xml.lsst.io/sal_interfaces/index.html
.. _telemetry: https://mermaid.live/view#pako:eNqVWWuP4jgW_SuILzO7qkKxYzsO3xiqenukYYQatkYalYRM4oJMJzGdB1V0q__7XttJKkASar9AwOf6cR_nHsOPcaBCOZ6O7-_vn9NApS_Rbvqcjka5SL_Kk3mED3v1-iTiUubT0YuIc2m_3stoty-mI-o4jv3mNQqL_XTE688pTD6Lo12ayBSAv2Ta4Jfn1Kxml7jfykI8p8_p56fZfHSnXydblWzFbFeKT1kklg66d0Z3CDF-BjpK4aBm0GNdg7R3kA8N-gODyBkaHFoT4aFBd2iQDA3SoUE2NOj1DwYDvo3SIce_Oe4f6lVmS4dYBOdXCDIX2U70IkR8LOP3wPvnS-xkKjMR18PYxc_p42o1uoOXiYiydZlty1imgTTjLoNknK2XqSwTUURBPrprf5rESoRzGccGTJ1hcIJmUbbMZJ6XmfyYBf6_LUSUgs1KlVkgry1bnngRULJRrKOBDYBduKoG4FsA9xaA3ALQWwB2C-DdAvBbAP8GQNfuMOCWJ1GvJxORyn9EqDJhsr9hH-ygYSD-KND9KJDcBq62MRyorkDsXFRgCxhHySHqBQaZCL42-YcRwh3DuHd4H8Wx9ZWpZYxpNwDfArhngMV6ocq0GP3675GL_3VXfZwUMpaJLLLTPI6gH32WIiu2UhTW0MO6Kj_LN3FQoS7J6nFyUHlURCpdFaIocwP23XPHhqdUAOPIyvEuo2ywxMErQRJqKMHIQBfzlcbAW3uQEUMVc5EA4-lx-wQNMk03-b4sCpltHuQxslxHMcKd-FB82yQqjQqVbVbwYtGEk070iwpEvDlAhsjNF7ldqwLYVmeWsfJ71riwymdH-HYn1zI5MG3IjIfn89qwfjrfXJls1plMwyjdGSPXIbdPdGVEzRYfVCK1iX5voqgBHOlZO7byrRThVr1tlg__3dAnA6U64zugg07iHHOTAMXORL7YTRKdgu8p5KOPeKMOle_qNtuT1kBLq_JwiE-rU17IxOCNArtxQEyeHizY7Z88ENsolYWDHLTeyywRtk-C4uODC_z26YsF4mpytHDXkOL10-QlVq8LWVh_IcdlvDPORxGUZWIxFHdjDrXbkePrwPYdRSUH3U1lCN21gn8gl-dBWIHdfmqpNUmZQZ7J_8SnQMV_ieZ0PuHGFBsH4Ml3CQHez9JdLCuAzy7yJSgzSOliDUJJtvIGZDDp9rz11Gau4rDWTZjcQuKPIbOTGga284rwp0qYVaGvT12IFPxUPKb6zpEtq4K0xwLednq9K8q3KI4EELfNxryditjTvmsLwE-QWnbI57xrB59UVolD4pD-hIF2cRR6iw9ZdJRnixLUk6_t8gVaOOMlRFzUn0J1D5krFdcGFGkXdvg7k1uT9XqNg_UgJd6Fu4F5AVs06pH7nfGYBUUpYL-rQlZTsWoqk47mbZLCuuHs-6M9Pmc97HXBL3OD9g1Z9Bw7Fy-yaFEX8v0BtNbGhmUt41lVQUi_gfgeJWWxv4ogRh4990a7QWDsDBJJEyHselVI62nEWyTiK5diWvmg5dL86-kxPUaZMrdjgwK38o80VyMyXBOlM-mQivyUFPtN4m5Mv1ko2ERVb2YfLmG2obb1BkS1B04cj1zCAfKtlA8SNGKlYHhVZZcUvzM0uCyTg8ERYmumNZdZdaPTanO2LEPMGcyBighaASVWKlxGootsCKMD0a0yBlaI5V-ZsHtnHrtpYYCcIXabUCzUszfTK3_8KfLkBFE8c4mPBrI8MFlytmXqUNvc2tNLoe-SoYnzk4xVEBWmhihCV3GuwWsT7xaqZw8w21eoimVknUwRxf3gJMoylc3VsRKV1B1ori3wH7BIXlkM-COUh1idtDuWsSheVJZYI4b9_uhshb4T1RqSUMY_2hmsAUftPhTrn7pSmG1VZNFX-d7BGcNXJVhk4h8ZQFBMNHSy8dZUsFoAkwSfIhmHMJ1MdzbbmFc3uJvUp-EeONmE5GlhyhTewLd5IGPNK8puzyNGa97oOQbpGVnz8PtiMbrTr5O8OSTH2PJic59qHpvj2LqFKvBwTR81eUx2p0w9iEJYMe32aPChZus77gCHFOrwmIZze3u0IpgjdrWNKA2A6eH6AEqu3g7cHVziXEFVWej0VId3HOOW8zt8IKB7gQdqLkAOtBHSh62aSaX_nKEilJYyLBJReu3Zw3v3bHbqOrSas40UAWSGzC5OD3fbszw_tH-gIq7Drl0TJXljTri5mjTmmYQChQT9XCZRWLERdjCj7R_1Qvm6VFHVI2HQcjGo-Hkl6VWmFzv7YiJATqldvTAG4Yyvt7YXWXjQU9cdu8GTRiB04hc27Ro4x6xKirP20yhNIB5sKbal8YsokbM0hEkMxkWUWfe1VMIlBiZ6b7fvUY3CeisuI_VJ661Ap1woLTJyc001KM_1-OVaF3dUipG5IDVxuFCUlCDUUbsmt2U4P0HpQC4aF1T062N23qPbBWauQ-vEHIJyr-4Il6oiid6gxJ9EfDSbYA73LnQtHNcu2pyWUZDel5K254bFmEtwp2eWLYXIPI97rO_s72cGDvDQpdDUFfi-no8Y432IL-K1F2R38_tiZdiYOc6Fc1_0Ln4zXU02EJhkFexlWEJpj-6ax4na5jI76hI46ZWtAWeUOwPaTvPd-jwpuMPwhbI2-3jUPXxtbxzVDyCQDufJEAd1EvuUck66fkI5vzYi4lP37PrXJq3l6qG6BzJ0IdPDKAc1HUhdFSuZ5jW9Qtm7jPTFtdKb7-FFhKKBPJjZFnyGJ7WQ68A_1rqiZUEdbFzRbVGFt43nvuO3qzY_6H5bJjMgxNP3qjlwFzkd_GZCdcWFcBvybEm0lMMhDy3zQVH7vSGw3Ac0Yhdr2Yc1X2EQ-073DaKw_m5Rm4s0zY7vxokeicLxdPxD_9f4PAZsIp_HU3gM5Yso4-J5_Jz-BKgoC7U6pcF4av68vBuXB1hcPkRil4mk-fYg0vH0x_htPHUJmTi-gziobuYDvZC78Wk8vScun3gehiZH4Tvq8J934-9KwRTuhPpAWQQal0uxByLKzPe3GQTnw_Qy1A1jYf9uNf-6_vwfL-YJiA
.. _events: https://mermaid.live/view#pako:eNqNVttu4zYQ_RVBL_siBxJ195sgby7ACnZrIwEKAQUj07YaiTQoartukH_vDOVbXNPNC286Z8jRcA7n3a7EktljezQalbwSfFWvxyW3rI7yN7bTQ5hsxN_PtOlZN7ZWtOnYsLxh9XqjxhZxXXdY4WAsa-o1bxmHD98atlLfSq6NDxZHr0zRkpc8WzwyumRyzuTPumKWc7Fw14g1-wlm_oRBwbqOrtnItRwvCeOo5MWi8Ap_Mbecw-hEWDe7SjSzvt3OFVV9hzSfhJGraURTyAnekqzrWPva7J74THS1qgVHSuCn6XGnwz4n2oZRqV4ZVRobBDEp-cMTHAgaIyoMErSYTfXBoTMiozC6ftwLXBIF-DO1xeyWxdAdvJmpNZqEzogkSYI2NTK7jUzB61kxsRxojCh_8GUiWoZbY2_GYpiyPTa7jQ2Ixk6nE-089mYs2n2hqtowaTn7gRGdYpwWrFOWg60JF7kh0VESPVc6UDgwor3hvz6yX3QrlsOV10MjIyH60v4u4CILiTvshyZG7HoE98hpyyTFLYaRGR9q_MumVuwH5jNyTjMjb3_v5ltWKSnWkm43yDyfm7hJGOn_UAguqo0U7eDbxYKRHaOHeX4hHxcLRnaCWvWDdkwuJK3e8DKcz8w8VJ0XmMK1uReSVRQvx8WCiZ3q3Pu65F2wPTc45A8c8y_4w0LuDpl0WjHyCQkOOXXOz77Mj4LbivsJH0YRepvnQ14OvQEbRTrfH5-z3HKwNeGSvXI-F_oA0BmQsauV2JyTVSOqt-lq1bEBD0kGJ7ivXyEOny7zf5ZMO8Z-rKNb5FqGoDMiA4xknh-y8zAy4BPXHxRuxlkPSVFXnRbk48zEg4An11-Prm9bKnf3tG9Ud3oeE19n1eSpKCwHW4Pl1IvQg2k-A1exNeISvHNzENll32CSHYcmBiSJ1rqjOhb_o44pvOgJ7iHrrfqtZz3DXY4TEysO8N98b3RcW6bwcOczEy-Jic6CrJa5aLcSSpJBkT8tGNie6-okemCcybo6xP_T1ETda_q1aF6WRolW84dLbXz4kjYS19ep8H0OsYXm7NIwDq6dFVN-EEdXkRdCQFySmCuouqleqOQ1X-vTEygT0qtFVLfrFGtP-3tw0ORWbVZzCCTm-RlHPxyumbMSsmJZpXp8fM7ORUgYhn6Q2I4NUWppvYRy-R3r3dIG7W9ZaY9huGQrzKnSLvkHQGmvxHzHK3usC2bH7rdLqtikpiAl7XF1S7k9frd_2WNw_y70k9QNYxIR4oWeY-_s8SiO7tw4jlIoojw_SKP0w7H_EQJMeHdRGoDWppGXktQHirb3h_6oZA_m2bIGZ4qhxNeV_se_TrIBWg
