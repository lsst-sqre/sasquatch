.. _observatory-telemetry:

########
Overview
########

Telemetry, events, and commands from the observatory are recorded in the Engineering and Facilities Database (EFD), enabling real-time monitoring of subsystems using Chronograf dashboards and alerts.

Data analysis of the EFD is conducted in the RSP notebook aspect, utilizing the EFD client.

In the Summit environment, the EFD data is retained for a nominal period of 30 days.
The data is then replicated to the USDF environment, allowing project staff to perform analysis without disrupting Summit operations, including trend analysis on historical data.

In Sasquatch, the EFD topics fall under the ``lsst.sal`` namespace, with their schemas defined by `SAL`_.


Relative throughput of EFD topics
---------------------------------

We employ a Sankey diagram to depict the data flow originated from the CSCs (source) to the Kafka topics (target) by looking at the size of each topic in Kafka (value) for `telemetry`_ and `events`_ topics. The thickness of the line connecting a CSC to a Kafka topic represents the relative throuput.

Note that only Kafka topics larger than 10KB are included in the visualization.

This diagnostic helped us to identify an excessive amount of data flowing to the ``MTM1M3.logevent_forceActuatorWarning-0`` topic.


.. _SAL: https://ts-xml.lsst.io/sal_interfaces/index.html
.. _telemetry: https://mermaid.live/view#pako:eNqVWWuP4jgW_SuILzO7opDtOI7DN4aq3h5pGKGGrZFGJSGTuCDTSUznQRXd6v--13aSCikSar9AwOf6cR_nHsOPcaBCOZ6N7-7untJApc_RfvaUjka5SL_Ks3mEDwf18ijiUuaz0bOIc2m_PshofyhmIxchZL95icLiMBvx-nMKk8_jaJ8mMgXgL5k2-OUpNavZJe52shBP6VP6-XG-GE3063Snkp2Y70vxKYvECuE7NJpgzPgF6CQFws2gx64Nur2DfGjQHxjEaGhwaE1MhgadoUE6NOgODbKhQa9_MBjwbZQOOf4VOX-oF5mtELUIzt8h6EJke9GLEPGpjN8C718usZepzERcDxOHPKUP6_VoAi9TEWWbMtuVsUwDacYdBsk436xSWSaiiIJ8NGl_msZKhAsZxwbsomFwgudRtspknpeZ_JgF-b8tRJSCzVqVWSDfW7Y88SygZKNYR4MYAOu4qgaQWwDnFoDeAri3AOwWwLsF4LcA_g2Art1hwC1P4l5PJiKV_4hQZcJkf8M-BOFhIPko0PkokN4GrncxHKiuQII6FdgCxlFyjHqBQSaCr03-EYzJlWHSO3yI4tj6ytQyIe51ALkFcC4Ay81SlWkx-vXfI4f8a1J9nBYylokssvMijqAffZYiK3ZSFNbQI7oqP8tXcVShLsnqcXpUeVREKl0XoihzA_adS8eG51QA48jK8Q5z2WCJg1eCJNRQSrCBLhdrjYG39iCjhioWIgHG0-P2CRpkmm7zQ1kUMtvey1Nkuc4lmFzFh-LbNlFpVKhsu4YXi6acXkU_q0DE2yNkiNx-kbuNKoBtdWYZK79njY5VPj_Bt3u5kcmRaUNmPLxY1Ib10-XmymS7yWQaRuneGDmI3j7ROyPXbPFeJVKb6PcmihrAsZ71yla-lSLcqdft6v6_W_fRQF2d8Vegg07inHCTAMXeRL7YTxOdgm8p5OOPeKMOle_oNtuT1kBL6_J4jM_rc17IxOCNArtxQEIf7y3Y6Z88ELsolQXCCG8OMkuE7ZOg-PjgAr99-mKBpJocL50NpHj9NH2O1ctSFtZfGDmMX43zSQRlmViMS65jjrXbMfJ1YPuOopKj7qYyhO5awT-Qy4sgrMBOP7XUmqTMIM_kf-JzoOK_RHM6n3JjSowDyPS7hAAf5uk-lhXAZ518CcoMUrrYgFCSrbwBGUyve956artQcVjrJkJvIcnHkNlZDQPbeUX5YyXMqtDXpy5ECn4qHlJ958hWVUHaYwFvo17vivI1iiMBxG2zMW-nIvG079oC8BOklh3yOb-2g08qq8QhRbQ_YaBdnITe4n0WneTFohT35Gu7fIEWLngJUwf3p1DdQxZKxbWBi7ULr_g7kzuT9XqNo_WgS72Ou4F5AVs06pH7V-MxD4pSwH7XhaymYtVUJh3N2zSFdcP59wd7fM562KvDLwuD9g1Z9Bw7F8-yaFEX9v0BtNbGhmUt41lVQWm_gfgeJWVxeBdBgj330hvtBkEIGiSSJkLE8aqQ1tOI10jE71xK3MoHLZfmX88P6SnKlLkdGxS4lX-kuRqR4ZgoXUiHVOTnpDhsE2dr-s1SwSaqejP7cCizDbWtNyCqPXCKPNqFA-RbKe8laMRKwfCqyroUvzc0uCqTo8FRamumNZdZdavTanuxLMMMDeZARQStgFIrFbqRuEY2lLkD0a0yBlaI5V-ZsHtnHrtpYYCcYXabUCzUszfTd_74U-TJGaJ44RIfD2R5YLLkYssucm1za08vhb5LhibOjzJWQVSYGnIxfhfnGrwx8W6hevYAs32FqlhF1skudkk_OImyTGULdapEpesMNNcW-A9YJK8sBvwRymOsztodq1gUzypLrBEjfn90dkLfiWoNSV3GP9oZrAHH7T4U65-6UphtXWTRV_nWwRkj70qwyMQ_MoCgmGjoZOOtqWC1ACYJPkUyDmE6me5ttjGvbnA3qU_DPXCyCcnj0pQpvIFv80DGmleU3Z5Hjda80XMM0jOy5v735XI00a_TvDkkJ8TyYnOfah6b49i6hSrwSE0frSPAp-n-nKl7UQgrqZ0eJT7Ucn3kDDBJoY4Pabiwd0grhTlmPZuJ0gBYH64SoOrqTcE9wqGox0CVhU5YdXxDM267wBWvCOhn4JOaHTCCxkL7sFV7qRQhGipLaUnEIrHr9vn6-NZVm_06yK1mfo8XAeSNzDr-gJvvRRUc2z9fUQexPmdFSd5MQrm5vjSTZBKKGJL4c5lEYcVYBBHmtn_4C-XLSkVVH4VBy9eg9BeV7FeZduHFF1MBkkvt64UJiGvSt8GDyMKjXqDu7Y0VbaTEgNXSJmhjxAmrEueiXTXKFIiKWEpu3QmKKJHzNIRJDMbBLrMObamKLgYmemvP3ZhHYb0hh9H67PWGoL8ulZYmubncGpTneLy7Yudm6xJsrlVNZDo61KUY91a8qQIZLs5QapC1xh0VdfuEXfb3dkGaq9QmMUdxuVd3k64iSaJXIIZHEZ_MVhjiXkcTw6Htos2ZmQuyvSuHe25njDmUXPXPqqUumedxjw174O3kwBke7kpVXatvq_qYMd6H-CJeekF2T78v14bPGUIdFz_rXfxm-qJsIDDJOjjIsITyH02ax6na5TI76dI465WtAWcuRwPqUPPj5jJBOGKko83NPh60CtjYO0v1EwokxWVKxEGd0L7rck6v_QhzefHE1Hediwtkm9hW6_vqJslwR-iHUQ56PJC6QtYyzWs6BjpwGB2ObqVb34KMqYtv5sTcNvQLK1rLwl6rh1qrtOxcRIxzhuyqsLetuI_8dmXnR93Jy2QONHr-XjUZ7mDUy4cmkO8YFG5bni2bljI55qFlSih8vzdAliuBcOySLfuwZjYClwl0_YZS2Di0SNDBmpbHk3GiR6JwPBv_0P9lPo0Bm8in8QweQ_ksyrh4Gj-lPwEqykKtz2kwnpk_Ryfj8giLy_tI7DORNN8eRTqe_Ri_jmewpSnHUNc-0CmF--5kfB7P7oiD8RRBoXJEKHIR-zkZf1cKZnCmPkU-pT7zoJw8z3PMdH-bQYgAzC5D3V-W9t9c86fuz_8B5WYZPg
.. _events: https://mermaid.live/view#pako:eNqNVttu4zYQ_RVBL_siBxJ195sgby7ACnZrIwEKAQUj07YaiTQoartukH_vDOVbXNPNC286Z8jRcA7n3a7EktljezQalbwSfFWvxyW3rI7yN7bTQ5hsxN_PtOlZN7ZWtOnYsLxh9XqjxhZxXXdY4WAsa-o1bxmHD98atlLfSq6NDxZHr0zRkpc8WzwyumRyzuTPumKWc7Fw14g1-wlm_oRBwbqOrtnItRwvCeOo5MWi8Ap_Mbecw-hEWDe7SjSzvt3OFVV9hzSfhJGraURTyAnekqzrWPva7J74THS1qgVHSuCn6XGnwz4n2oZRqV4ZVRobBDEp-cMTHAgaIyoMErSYTfXBoTMiozC6ftwLXBIF-DO1xeyWxdAdvJmpNZqEzogkSYI2NTK7jUzB61kxsRxojCh_8GUiWoZbY2_GYpiyPTa7jQ2Ixk6nE-089mYs2n2hqtowaTn7gRGdYpwWrFOWg60JF7kh0VESPVc6UDgwor3hvz6yX3QrlsOV10MjIyH60v4u4CILiTvshyZG7HoE98hpyyTFLYaRGR9q_MumVuwH5jNyTjMjb3_v5ltWKSnWkm43yDyfm7hJGOn_UAguqo0U7eDbxYKRHaOHeX4hHxcLRnaCWvWDdkwuJK3e8DKcz8w8VJ0XmMK1uReSVRQvx8WCiZ3q3Pu65F2wPTc45A8c8y_4w0LuDpl0WjHyCQkOOXXOz77Mj4LbivsJH0YRepvnQ14OvQEbRTrfH5-z3HKwNeGSvXI-F_oA0BmQsauV2JyTVSOqt-lq1bEBD0kGJ7ivXyEOny7zf5ZMO8Z-rKNb5FqGoDMiA4xknh-y8zAy4BPXHxRuxlkPSVFXnRbk48zEg4An11-Prm9bKnf3tG9Ud3oeE19n1eSpKCwHW4Pl1IvQg2k-A1exNeISvHNzENll32CSHYcmBiSJ1rqjOhb_o44pvOgJ7iHrrfqtZz3DXY4TEysO8N98b3RcW6bwcOczEy-Jic6CrJa5aLcSSpJBkT8tGNie6-okemCcybo6xP_T1ETda_q1aF6WRolW84dLbXz4kjYS19ep8H0OsYXm7NIwDq6dFVN-EEdXkRdCQFySmCuouqleqOQ1X-vTEygT0qtFVLfrFGtP-3tw0ORWbVZzCCTm-RlHPxyumbMSsmJZpXp8fM7ORUgYhn6Q2I4NUWppvYRy-R3r3dIG7W9ZaY9huGQrzKnSLvkHQGmvxHzHK3usC2bH7rdLqtikpiAl7XF1S7k9frd_2WNw_y70k9QNYxIR4oWeY-_s8SiO7tw4jlIoojw_SKP0w7H_EQJMeHdRGoDWppGXktQHirb3h_6oZA_m2bIGZ4qhxNeV_se_TrIBWg
